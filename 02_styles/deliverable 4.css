/* ### BEGIN DELIVERABLE 4. Breakpoints 10.11.25 */

/* ——— AP–REPS gallery: lock per-slide aspect + flush-top crop (GLOBAL) ——— */
.sqs-gallery.sqs-gallery-design-grid .slide .margin-wrapper {
  aspect-ratio: var(--ap-aspect, 4 / 3); /* 4:3 fallback */
  overflow: hidden;
  position: relative;
  box-sizing: border-box !important; /* switched from content-box to stop vertical padding stacking */
  padding-bottom: 0 !important; /* move spacing to row-gap only */
  padding-right: var(--ap-gap-x, 10px) !important;
}

.sqs-gallery.sqs-gallery-design-grid .margin-wrapper img.thumb-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: top center; /* flush-top */
  display: block;
  position: absolute !important;
  inset: 0 var(--ap-gap-x, 10px) var(--ap-gap, 10px) 0;
}

/* Captions left across all grid galleries */
.sqs-gallery-block-show-meta .image-slide-title,
.sqs-gallery-block-show-meta .image-meta,
.sqs-gallery-block-show-meta .sqs-block-caption {
  text-align: left !important;
  margin-top: .5rem;
  line-height: 1.3;
}

/* Scope to the Will Myers tabs host so only artist tabs are affected */
.apreps [data-wm-plugin="tabs"] .page-section,
.apreps [data-wm-plugin="tabs"] .content-wrapper{
  height: auto !important;
  min-height: 0 !important;
  max-height: none !important;
  overflow: visible !important;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

/* Galleries inside tabs should never carry hard heights */
.apreps [data-wm-plugin="tabs"] .sqs-block-gallery,
.apreps [data-wm-plugin="tabs"] .sqs-block-gallery > .sqs-block-content,
.apreps [data-wm-plugin="tabs"] .sqs-block-gallery-block.sqs-block-gallery{
  height: auto !important;
  min-height: 0 !important;
  max-height: none !important;
  overflow: visible !important;
}

/* Mobile: nothing sticky so the layout can collapse */
@media (max-width: 767px){
  .apreps [data-wm-plugin="tabs"] .sqs-position-sticky{
    position: static !important;
    top: auto !important;
    bottom: auto !important;
  }
}


/* Catch when Squarespace puts height/min-height on the grid itself */
.apreps [data-wm-plugin="tabs"] .sqs-gallery-block-grid .gallery-grid[style*="height"],
.apreps [data-wm-plugin="tabs"] .sqs-gallery-block-grid .gallery-grid[style*="min-height"]{
  height: auto !important;
  min-height: 0 !important;
  max-height: none !important;
}

/* Catch FE wrappers that get a min-height inline */
.apreps [data-wm-plugin="tabs"] .fe-block[style*="min-height"],
.apreps [data-wm-plugin="tabs"] .sqs-block-content[style*="min-height"]{
  min-height: 0 !important;
  height: auto !important;
}

/* Keep FE from stretching the block anyway */
.apreps [data-wm-plugin="tabs"] [data-fluid-engine] .fe-block{ align-self: start !important; }
.apreps [data-wm-plugin="tabs"] [data-fluid-engine] .fe-row,
.apreps [data-wm-plugin="tabs"] [data-fluid-engine] .fe-column{ min-height: 0 !important; }


/* Force Grid Gallery blocks to hug content */
.apreps .sqs-block.sqs-block-gallery,
.apreps .sqs-block.sqs-block-gallery > .sqs-block-content,
.apreps .sqs-block.sqs-block-gallery .sqs-gallery,
.apreps .sqs-gallery-block-grid,
.apreps .sqs-gallery.sqs-gallery-design-grid {
height: auto !important;
min-height: 0 !important;
max-height: none !important;
padding-bottom: 0 !important; 
}

/* Let artist name overlay the gallery, not push it down */
.apreps [data-wm-plugin="tabs"] .artist-name {
  position: absolute !important;
  top: 0;                /* adjust for placement, e.g. 1rem */
  left: 0;
  right: 0;              /* if you want full width */
  z-index: 5;            /* higher than gallery */
  mix-blend-mode: difference;
  pointer-events: none;  /* so clicks go to gallery images */
}

/* Make sure the gallery section is a positioning context */
.apreps [data-wm-plugin="tabs"] .page-section:has(.sqs-block-gallery),
.apreps [data-wm-plugin="tabs"] .sqs-block-gallery > .sqs-block-content {
  position: relative !important;
}

/* Ensure grid tracks don’t enforce extra height */
.apreps .sqs-gallery-block-grid .gallery-grid {
grid-auto-rows: auto !important;
align-items: start !important;
}


/* Override any editor-dragged inline heights */
.apreps .sqs-block.sqs-block-gallery[style="height"],
.apreps .sqs-block.sqs-block-gallery[style*="min-height"],
.apreps .sqs-block.sqs-block-gallery > .sqs-block-content[style*="height"],
.apreps .sqs-block.sqs-block-gallery > .sqs-block-content[style*="min-height"],
.apreps .sqs-gallery-block-grid[style*="height"],
.apreps .sqs-gallery-block-grid[style*="min-height"],
.apreps .sqs-gallery.sqs-gallery-design-grid[style*="height"],
.apreps .sqs-gallery.sqs-gallery-design-grid[style*="min-height"] {
height: auto !important;
min-height: 0 !important;
}

.apreps .wm-tabs [data-tab-panel] .sqs-block.sqs-block-gallery,
.apreps .wm-tabs [data-tab-panel] .sqs-gallery-block-grid { height: auto !important; min-height: 0 !important; }

/* Nuke FE's inline height on the pulled artist section wrappers */
.apreps [data-wm-plugin="tabs"] .content-wrapper[style*="height"],
.apreps [data-wm-plugin="tabs"] .page-section[style*="height"]{
  height: auto !important;
  min-height: 0 !important;
  max-height: none !important;
  overflow: visible !important;
}


/* Let Fluid Engine shrink-wrap to the gallery content */
.apreps [data-wm-plugin="tabs"] [class^="fe-"] {
  grid-template-rows: none !important;
  grid-auto-rows: minmax(8px, auto) !important;
}

/* FINAL — the selector that collapsed the FE rows inside the active tab */
.apreps :is(.wm-tabs,[data-wm-plugin="tabs"])
  .tab-panel[aria-hidden="false"] .page-section .fluid-engine{
  grid-template-rows: none !important;
  grid-auto-rows: minmax(8px, auto) !important;
  height: auto !important;
  min-height: 0 !important;
  max-height: none !important;
  display: block !important; /* belt + braces; mirrors your devtools test */
}

/* strip the section padding that showed up in your screenshots */
.apreps :is(.wm-tabs,[data-wm-plugin="tabs"])
  .tab-panel[aria-hidden="false"] .page-section .content-wrapper{
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

/* Side padding + consistent gaps for artist tab galleries */
.apreps .wm-tabs .tab-panel > .tab-content .sqs-block.sqs-block-gallery,
.apreps .wm-tabs .tab-panel > .tab-content .sqs-block.sqs-block-gallery > .sqs-block-content {
  padding-left: 30px !important;
  padding-right: 30px !important;
  box-sizing: border-box !important;
}

/* Keep gutters between images */
.apreps .wm-tabs .tab-panel > .tab-content .sqs-gallery-block-grid .gallery-grid {
  row-gap: 20px !important;
  column-gap: 20px !important;
  display: grid !important;
}

/* Prevent double spacing: remove per-slide right padding inside tab galleries */
.apreps .wm-tabs .tab-panel > .tab-content .sqs-gallery-block-grid .slide {
  padding-right: 0 !important;
}
/* ### END DELIVERABLE 4. Breakpoints 10.11.25 */