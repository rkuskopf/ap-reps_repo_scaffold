<!-- Cursor Collage Plugin by digitalmoves.com.au -->
<script type="text/javascript">
  const cursorCollageConfig = {
    distance: 100,        // distance between placing new images
    maxImageSize: 400,     // maximum image width/height in pixels
    fade: true,            // whether to fade images after they have been placed
    fadeTime: 2000,        // time to wait before fading out placed images
  }
</script>
<script src="//unpkg.com/@digitalmoves/cursor-collage"></script>
<!-- Cursor Collage Plugin by digitalmoves.com.au -->


<!-- BEGIN DELIVERABLE 5 -->

<script>
(function () {
  const mq = window.matchMedia ? window.matchMedia('(max-width: 767px)') : null;
  const SUMMARY_SELECTOR = '.fe-block-yui_3_17_2_1_1762921605769_3650';
  const HERO_SELECTOR = 'section[data-section-id="68e1a8f1e44bd1493a1074d2"]';

  function destroyMobileHero() {
    const collage = document.querySelector('.mobile-hero-collage');
    if (collage) {
      collage.remove();
    }
    // Let CSS control visibility of the source Summary block on desktop.
    const summaryBlock = document.querySelector(SUMMARY_SELECTOR);
    if (summaryBlock) {
      summaryBlock.style.display = '';
    }
  }

  function buildMobileHero() {
    // avoid running twice
    if (document.querySelector('.mobile-hero-collage')) return;

    const summaryBlock = document.querySelector(SUMMARY_SELECTOR);
    if (!summaryBlock) return;

    const images = summaryBlock.querySelectorAll('.summary-thumbnail-image');
    if (!images.length) return; // Squarespace not ready yet

    // Hide the original Summary Block UI on mobile
    summaryBlock.style.display = 'none';

    const heroSection = document.querySelector(HERO_SELECTOR);
    if (!heroSection) return;

    const collage = document.createElement('div');
    collage.classList.add('mobile-hero-collage');
    heroSection.prepend(collage);

    const lanes = [];
    for (let i = 1; i <= 3; i++) {
      const lane = document.createElement('div');
      lane.classList.add('mobile-hero-lane', `lane-${i}`);
      collage.appendChild(lane);
      lanes.push(lane);
    }

    function cloneThumb(img) {
      const clone = img.cloneNode(true);

      const dataImage = img.getAttribute('data-image');
      const dataSrc = img.getAttribute('data-src');
      const finalSrc = dataImage || dataSrc || img.currentSrc || img.src;

      if (finalSrc) {
        clone.src = finalSrc;
      }

      clone.removeAttribute('data-src');
      clone.removeAttribute('data-image');
      clone.removeAttribute('data-load');
      clone.removeAttribute('data-image-dimensions');
      clone.removeAttribute('style');

      clone.style.visibility = 'visible';
      clone.style.opacity = '1';

      return clone;
    }

      images.forEach((img, index) => {
      const lane = lanes[index % lanes.length];
      const clone = cloneThumb(img);
      lane.appendChild(clone);
    });

    // NEW: duplicate each lane's content so it can scroll seamlessly
    lanes.forEach((lane) => {
      const children = Array.from(lane.children);
      children.forEach((child) => {
        lane.appendChild(child.cloneNode(true));
      });
    });
  }

  function handleHeroMode() {
    if (!mq) return;
    if (mq.matches) {
      // Mobile
      buildMobileHero();
    } else {
      // Desktop
      destroyMobileHero();
    }
  }

  document.addEventListener('DOMContentLoaded', handleHeroMode);
  document.addEventListener('sqs-content-loaded', handleHeroMode);

  if (mq) {
    if (mq.addEventListener) {
      mq.addEventListener('change', handleHeroMode);
    } else if (mq.addListener) {
      mq.addListener(handleHeroMode);
    }
  }
})();
</script>

<!-- end DELIVERABLE 5 -->
