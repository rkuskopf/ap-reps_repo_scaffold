<!-- Cursor Collage Plugin by digitalmoves.com.au -->
<script type="text/javascript">
  const cursorCollageConfig = {
    distance: 100,        // distance between placing new images
    maxImageSize: 400,     // maximum image width/height in pixels
    fade: true,            // whether to fade images after they have been placed
    fadeTime: 2000,        // time to wait before fading out placed images
  }
</script>
<script src="//unpkg.com/@digitalmoves/cursor-collage"></script>
<!-- Cursor Collage Plugin by digitalmoves.com.au -->


<!-- BEGIN DELIVERABLE 5 -->

<script>
(function () {
  function initMobileHero() {
    // MOBILE ONLY â€” bail out completely on desktop so we never
    // touch the desktop hero/plugin or Summary visibility there.
    if (!window.matchMedia || !window.matchMedia('(max-width: 767px)').matches) {
      return;
    }
    // avoid running twice
    if (document.querySelector('.mobile-hero-collage')) return;

    // 1) Find the Summary Block
    const summaryBlock = document.querySelector('.fe-block-yui_3_17_2_1_1762921605769_3650');
    if (!summaryBlock) return;

    // 2) Make sure images actually exist inside it
    const images = summaryBlock.querySelectorAll('.summary-thumbnail-image');
    if (!images.length) return; // Squarespace not ready yet

    // 3) Hide the original Summary Block
    summaryBlock.style.display = 'none';

    // 4) Find the hero section
    const heroSection = document.querySelector('section[data-section-id="68e1a8f1e44bd1493a1074d2"]');
    if (!heroSection) return;

    // 5) Create the collage container in the hero
    const collage = document.createElement('div');
    collage.classList.add('mobile-hero-collage');
    heroSection.prepend(collage);

    // 6) Create 3 inner lanes inside the collage
    const lanes = [];
    for (let i = 1; i <= 3; i++) {
      const lane = document.createElement('div');
      lane.classList.add('mobile-hero-lane', `lane-${i}`);
      collage.appendChild(lane);
      lanes.push(lane);
    }

    // Helper: clone + normalise one thumbnail
    function cloneThumb(img) {
      const clone = img.cloneNode(true);

      // Prefer the full image URL from data-image, then fall back
      // to Squarespace's lazy-src or the live img src/currentSrc.
      const dataImage = img.getAttribute('data-image');
      const dataSrc = img.getAttribute('data-src');
      const finalSrc = dataImage || dataSrc || img.currentSrc || img.src;

      if (finalSrc) {
        clone.src = finalSrc;
      }

      // Strip lazy-load attributes/flags that can keep it hidden
      clone.removeAttribute('data-src');
      clone.removeAttribute('data-image');
      clone.removeAttribute('data-load');
      clone.removeAttribute('data-image-dimensions');

      // Remove any inline transforms/positioning Squarespace added
      clone.removeAttribute('style');

      // Safety: force the clone itself visible
      clone.style.visibility = 'visible';
      clone.style.opacity = '1';

      return clone;
    }

    // 7) Distribute images across the 3 lanes
    //    0 -> lane-1, 1 -> lane-2, 2 -> lane-3, 3 -> lane-1, etc.
    images.forEach((img, index) => {
      const lane = lanes[index % lanes.length];
      const clone = cloneThumb(img);
      lane.appendChild(clone);
    });

    // (Animation + duplication for seamless looping will be handled in CSS / next step)
  }

  // First attempt: DOM ready
  document.addEventListener('DOMContentLoaded', initMobileHero);

  // Second chance: when Squarespace finishes loading content
  document.addEventListener('sqs-content-loaded', function () {
    initMobileHero();
  });
})();
</script>

<!-- end DELIVERABLE 5 -->
