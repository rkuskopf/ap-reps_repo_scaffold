<!-- Cursor Collage Plugin by digitalmoves.com.au -->
<script type="text/javascript">
  const cursorCollageConfig = {
    distance: 100,        // distance between placing new images
    maxImageSize: 400,     // maximum image width/height in pixels
    fade: true,            // whether to fade images after they have been placed
    fadeTime: 2000,        // time to wait before fading out placed images
  }
</script>
<script src="//unpkg.com/@digitalmoves/cursor-collage"></script>
<!-- Cursor Collage Plugin by digitalmoves.com.au -->


<!-- BEGIN DELIVERABLE 5 -->
<script>
(function () {
  const MOBILE_QUERY = '(max-width: 767px)';
  const SUMMARY_SELECTOR = '.fe-block-yui_3_17_2_1_1762921605769_3650';
  const HERO_SELECTOR = 'section[data-section-id="68e1a8f1e44bd1493a1074d2"]';

  function cloneThumb(img) {
    const clone = img.cloneNode(true);

    const dataImage = img.getAttribute('data-image');
    const dataSrc   = img.getAttribute('data-src');
    const finalSrc  = dataImage || dataSrc || img.currentSrc || img.src;

    if (finalSrc) clone.src = finalSrc;

    clone.removeAttribute('data-src');
    clone.removeAttribute('data-image');
    clone.removeAttribute('data-load');
    clone.removeAttribute('data-image-dimensions');
    clone.removeAttribute('style');

    clone.style.visibility = 'visible';
    clone.style.opacity = '1';

    return clone;
  }

  function enableMobileHero() {
    if (!window.matchMedia || !window.matchMedia(MOBILE_QUERY).matches) return;

    // Avoid duplicating the collage
    if (document.querySelector('.mobile-hero-collage')) return;

    const summaryBlock = document.querySelector(SUMMARY_SELECTOR);
    if (!summaryBlock) return;

    const images = summaryBlock.querySelectorAll('.summary-thumbnail-image');
    if (!images.length) return;

    const heroSection = document.querySelector(HERO_SELECTOR);
    if (!heroSection) return;

    // Remember original display so we can restore on desktop
    if (!summaryBlock.dataset.apOriginalDisplay) {
      summaryBlock.dataset.apOriginalDisplay = summaryBlock.style.display || '';
    }
    summaryBlock.style.display = 'none';

    const collage = document.createElement('div');
    collage.classList.add('mobile-hero-collage');
    heroSection.prepend(collage);

    const lanes = [];
    for (let i = 1; i <= 6; i++) {
      const lane = document.createElement('div');
      lane.classList.add('mobile-hero-lane', `lane-${i}`);
      collage.appendChild(lane);
      lanes.push(lane);
    }

    const sourceImages = Array.from(images);
    if (!sourceImages.length) return;

    const shuffled = sourceImages.slice().sort(() => Math.random() - 0.5);
    const IMAGES_PER_LANE = Math.min(7, shuffled.length);
    const sizes = ['size-sm', 'size-md', 'size-lg'];

    lanes.forEach((lane, laneIndex) => {
      const start = Math.floor((shuffled.length / lanes.length) * laneIndex);

      for (let i = 0; i < IMAGES_PER_LANE; i++) {
        const srcIndex = (start + i) % shuffled.length;
        const clone = cloneThumb(shuffled[srcIndex]);

        const randomSize = sizes[Math.floor(Math.random() * sizes.length)];
        clone.classList.add(randomSize);

        lane.appendChild(clone);
      }
    });
  }

  function disableMobileHero() {
    const summaryBlock = document.querySelector(SUMMARY_SELECTOR);
    const collage = document.querySelector('.mobile-hero-collage');

    // Remove the collage entirely on desktop
    if (collage && collage.parentNode) {
      collage.parentNode.removeChild(collage);
    }

    // Restore the Summary Block visibility
    if (summaryBlock) {
      const original = summaryBlock.dataset.apOriginalDisplay;
      if (typeof original === 'string') {
        summaryBlock.style.display = original;
      } else {
        summaryBlock.style.removeProperty('display');
      }
    }
  }

  function syncHeroToViewport() {
    if (!window.matchMedia) return;
    const mq = window.matchMedia(MOBILE_QUERY);
    if (mq.matches) {
      enableMobileHero();
    } else {
      disableMobileHero();
    }
  }

  function setupMediaListener() {
    if (!window.matchMedia) return;
    const mq = window.matchMedia(MOBILE_QUERY);
    const handler = (e) => {
      if (e.matches) {
        enableMobileHero();
      } else {
        disableMobileHero();
      }
    };

    if (mq.addEventListener) {
      mq.addEventListener('change', handler);
    } else if (mq.addListener) {
      mq.addListener(handler);
    }
  }

  document.addEventListener('DOMContentLoaded', syncHeroToViewport);
  document.addEventListener('sqs-content-loaded', syncHeroToViewport);
  setupMediaListener();
  syncHeroToViewport();
})();
</script>
