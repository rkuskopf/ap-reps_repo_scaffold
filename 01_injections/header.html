<!-- Utilities for Will-Myers.com Plugins -->
<script src="https://cdn.jsdelivr.net/gh/willmyerscode/toolkit@1/index.min.js"></script>
<!-- Tabs Code CSS From Will-Myers.com -->
<link href="https://cdn.jsdelivr.net/gh/willmyerscode/tabs@5/tabs.min.css" rel="stylesheet">
<script>document.documentElement.classList.add('apreps');</script>

<!-- Dot Cursor by digitalmoves.com.au -->
<script>
document.addEventListener("DOMContentLoaded", () => { // once the page is ready
    // add the element to the body
    const cursor = document.createElement("span")
    cursor.classList.add("dot-cursor")
    cursor.innerHTML = "<span />" // add inner element
    cursor.style.opacity = 0 // hide until mouse move
    document.body.appendChild(cursor)

    // update the dot position on mouse move
    document.addEventListener("mousemove", (e) => {
        if(e.clientX < 3 || e.clientY < 3){
            // hide on edges of screen
            cursor.style.opacity = 0
        } else {
            cursor.style.opacity = 1;
            cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
        }
    })

    // add hover effect when over links and buttons
    const targets = document.querySelectorAll("a, button") // CSS selectors for which elements have the hover effect
    targets.forEach((target) => {
        target.addEventListener("mouseenter", () => cursor.classList.add("active"))
        target.addEventListener("mouseleave", () => cursor.classList.remove("active"))
    })
})
</script>
<!-- Dot Cursor by digitalmoves.com.au -->

<script>
document.addEventListener('DOMContentLoaded', () => {
  const scope = document.documentElement; // body has class "apreps"
  if (!scope.classList.contains('apreps')) return;

  const patch = (root=document) => {
    root.querySelectorAll('[data-fluid-engine="true"].fluid-engine').forEach(el => {
      el.style.setProperty('grid-template-rows','none','important');
      el.style.setProperty('grid-auto-rows','minmax(8px,auto)','important');
      el.style.setProperty('height','auto','important');
      el.style.setProperty('min-height','0','important');
      el.style.setProperty('max-height','none','important');
    });
    root.querySelectorAll('.page-section, .content-wrapper').forEach(el => {
      el.style.setProperty('padding-top','0','important');
      el.style.setProperty('padding-bottom','0','important');
    });
  };

  patch();
  new MutationObserver(m => {
    for (const rec of m)
      for (const n of rec.addedNodes)
        if (n.nodeType === 1) patch(n);
  }).observe(document.body,{subtree:true,childList:true});
});
</script>

<!-- AP-REPS: Reveal Bio section after gallery images load to prevent layout shift -->
<script>
(function() {
  function revealBioSection() {
    document.documentElement.classList.add('ap-bio-ready');
  }
  
  // Wait for gallery images to load, then reveal Bio section
  function checkGalleryImages() {
    var gallery = document.querySelector('.sqs-gallery.sqs-gallery-design-grid');
    if (!gallery) {
      // No gallery found, reveal immediately
      revealBioSection();
      return;
    }
    
    var images = gallery.querySelectorAll('img.thumb-image');
    if (images.length === 0) {
      // No images in gallery, reveal immediately
      revealBioSection();
      return;
    }
    
    // Count loaded images
    var loadedCount = 0;
    var totalImages = images.length;
    
    function onImageLoad() {
      loadedCount++;
      // Reveal once first row is loaded (3 images) or all images
      if (loadedCount >= Math.min(3, totalImages)) {
        revealBioSection();
      }
    }
    
    images.forEach(function(img) {
      if (img.complete && img.naturalHeight > 0) {
        onImageLoad();
      } else {
        img.addEventListener('load', onImageLoad);
        img.addEventListener('error', onImageLoad); // Count errors too to prevent stuck state
      }
    });
  }
  
  // Run when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', checkGalleryImages);
  } else {
    checkGalleryImages();
  }
  
  // Fallback: reveal after 2 seconds no matter what
  setTimeout(revealBioSection, 2000);
})();
</script>