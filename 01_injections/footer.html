<!-- Image hover list by digitalmoves.com.au -->
<script src="//unpkg.com/@digitalmoves/image-hover-list"></script>
<link href="//unpkg.com/@digitalmoves/image-hover-list/dist/main.css" rel="stylesheet" />
<!-- Image hover list by digitalmoves.com.au -->

<!-- Copy to Clipboard Code Snippet by digitalmoves.com.au -->
<script src="//unpkg.com/@digitalmoves/code-tools"></script>
<script>
  CodeTools.init({ theme: "monokai-sublime" });
</script>
<!-- Copy to Clipboard Code Snippet by digitalmoves.com.au -->

<!-- Infinite auto scroll by digitalmoves.com.au/plugins -->
<script src="https://unpkg.com/embla-carousel/embla-carousel.umd.js"></script>
<script src="https://unpkg.com/embla-carousel-auto-scroll/embla-carousel-auto-scroll.umd.js"></script>
<script src="//unpkg.com/@digitalmoves/infinite-auto-scroll"></script>
<!-- Infinite auto scroll by digitalmoves.com.au/plugins -->

<!-- Tabs Code Javascript From Will-Myers.com -->
<script src="https://cdn.jsdelivr.net/gh/willmyerscode/tabs@5/tabs.min.js"></script>

<!-- AP-REPS v0.5 â€” solid non-stripe gallery -->
<script>
(function(){
  // Target the page with `.apreps` for better scoping
  const scope = document.querySelector('.apreps') || document;

  function classify(img) {
    const slide = img.closest('.slide');
    if (!slide) return;

    // Look for Squarespace-provided dimensions first
    let w, h;
    const dims = img.getAttribute('data-image-dimensions');
    if (dims && dims.includes('x')) {
      const parts = dims.split('x');
      w = parseInt(parts[0], 10);
      h = parseInt(parts[1], 10);
    } else if (img.naturalWidth && img.naturalHeight) {
      w = img.naturalWidth;
      h = img.naturalHeight;
    }
    if (!w || !h) return;

    const isLandscape = (w / h) >= 1; // treat squares as landscape by default
    slide.classList.toggle('landscape', isLandscape);
    slide.classList.toggle('portrait', !isLandscape);
    slide.classList.add('loaded');
  }

  function scan() {
    scope.querySelectorAll('.sqs-gallery.sqs-gallery-design-grid .thumb-image').forEach(img => {
      if (img.complete) {
        classify(img);
      } else {
        img.addEventListener('load', () => classify(img), { once: true });
      }
    });
  }

  // Run classification on page load and when content is injected
  const kick = () => setTimeout(scan, 600);
  document.addEventListener('DOMContentLoaded', kick);
  window.addEventListener('load', kick);

  // Re-scan when tabs are clicked
  document.addEventListener('click', (e) => {
    if (e.target.closest('.tabs-header [role="tab"], .tabs-header button')) {
      setTimeout(scan, 400);
    }
  });

  // Handle lazy-loaded images when they come into view
  const io = new IntersectionObserver(entries => {
    entries.forEach(ent => { if (ent.isIntersecting) classify(ent.target); });
  }, { rootMargin: '200px' });
  
  scope.querySelectorAll('.sqs-gallery-design-grid .thumb-image').forEach(img => io.observe(img));
})();
</script>